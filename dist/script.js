(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function Article(title, author, published, content) {
  var article = Tag.create("div", {
    "class": "Article"
  }, [Tag.create("h1", {
    "class": "Article__Title"
  }, [title]), Tag.create("div", {
    "class": "Article__Metadata"
  }, [Tag.create("span", {
    "class": "Article__Author"
  }, [author]), Tag.create("span", {
    "class": "Article__Published"
  }, [published])]), Tag.create("p", {
    "class": "Article__Content"
  }, [content])]);
  return article;
}

module.exports = Article;

},{"../toolkit":11}],2:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function CategoriesList(articles) {
  // Récupérer les données pertinantes
  var categories = new Set();

  for (var a in articles) {
    categories.add(articles[a].category);
  } // Génerer le tableau de LI


  var itemList = [];
  categories.forEach(function (elm) {
    itemList.push(Tag.create("li", {}, [elm]));
  }); // Créer le composant HTML

  var categoriesList = Tag.create("div", {
    "class": "Categories"
  }, [Tag.create("p", {}, ["Liste des catégories"]), Tag.create("ul", {}, itemList)]);
  return categoriesList;
}

module.exports = CategoriesList;

},{"../toolkit":11}],3:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function Counter(articles) {
  var counter = Tag.create("div", {
    "class": "Counter"
  }, [Tag.create("span", {}, ["Nombre d'articles : "]), Tag.create("span", {}, [articles.length])]);
  return counter;
}

module.exports = Counter;

},{"../toolkit":11}],4:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit'); //Component footer


function Footer(logo, menu, socialNetwork) {
  var footer = Tag.create("footer", {
    "class": "footer"
  }, [Tag.create("div", {
    "class": "logo"
  }, [logo]), Tag.create("div", {
    "class": "menu"
  }, [menu]), Tag.create("div", {
    "class": "socialNetwork"
  }, [socialNetwork])]);
  return footer;
}

module.exports = Footer;

},{"../toolkit":11}],5:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function Formulaire(action, method) {
  var formulaire = Tag.create("div", {
    "class": "Formulaire"
  }, [Tag.create("form", {
    "class": "Form",
    action: action,
    method: method
  }, [Tag.create("input", {
    "class": "Form_Title",
    "type": "text",
    "name": "title",
    "value": "title"
  }), Tag.create("input", {
    "class": "Form_Author",
    "type": "text",
    "name": "author",
    "value": "author"
  }), Tag.create("input", {
    "class": "Form_Published",
    "type": "text",
    "name": "published",
    "value": "20/02/2021"
  }), Tag.create("input", {
    "class": "Form_Category",
    "type": "text",
    "name": "category",
    "value": "category"
  }), Tag.create("input", {
    "class": "Form_Content",
    "type": "text",
    "name": "content",
    "value": "content"
  }), Tag.create("input", {
    "class": "Form_Submit",
    "type": "submit"
  })])]);
  action.responseType = 'json';
  return formulaire;
}

module.exports = Formulaire;

},{"../toolkit":11}],6:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function Header(logo, menu) {
  var header = Tag.create("header", {
    "class": "header"
  }, [Tag.create("div", {
    "class": "logo"
  }, [logo]), Tag.create("div", {
    "class": "menu"
  }, [menu])]);
  return header;
}

module.exports = Header;

},{"../toolkit":11}],7:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function Logo(url, alt) {
  var logo = Tag.create("img", {
    "src": url,
    "alt": alt
  }, []);
  return logo;
}

module.exports = Logo;

},{"../toolkit":11}],8:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function NavList(dataNav) {
  // Génerer le tableau de LI
  var menuList = [];

  for (var elm in dataNav) {
    menuList.push(Tag.create("li", {}, [Tag.create("a", {
      'href': dataNav[elm]
    }, [elm])]));
  }

  ; // Créer le composant HTML

  var navList = Tag.create("nav", {
    "class": "NavBar"
  }, [Tag.create("ul", {}, menuList)]);
  return navList;
}

module.exports = NavList;

},{"../toolkit":11}],9:[function(require,module,exports){
"use strict";

var Tag = require('../toolkit');

function SocialList(dataSocial) {
  // Génerer le tableau de LI
  var socialList = [];

  for (var elm in dataSocial) {
    socialList.push(Tag.create("li", {}, [Tag.create("a", {
      'href': dataSocial[elm]
    }, [elm])]));
  }

  ; // Créer le composant HTML

  var listSocial = Tag.create("nav", {
    "class": "SocialBar"
  }, [Tag.create("ul", {}, socialList)]);
  return listSocial;
}

module.exports = SocialList;

},{"../toolkit":11}],10:[function(require,module,exports){
"use strict";

var Tag = require('./toolkit');

var Article = require('./components/Article');

var Header = require('./components/Header');

var Footer = require('./components/Footer');

var Formulaire = require('./components/Formulaire');

var CategoriesList = require('./components/CategoriesList');

var Counter = require('./components/Counter');

var Logo = require('./components/Logo');

var NavList = require('./components/NavList');

var SocialList = require('./components/SocialList'); // ##########################
// # Code de l'application
// ##########################
//GÉNÉRATION HEADER


Tag.append(Header(Logo('https://picsum.photos/80', 'Logo aléatoire'), NavList({
  "Accueil": "/accueil",
  "Articles": "/articles",
  "À propos de nous": "/apropos"
})), Tag.get('header')[0]); //GÉNÉRATION ARTICLES

fetch(new Request("http://188.165.104.163:8080/articles")).then(function (res) {
  return res.json();
}).then(function (articles) {
  Tag.append(CategoriesList(articles), Tag.get('main')[0]);
  Tag.append(Counter(articles), Tag.get('main')[0]);

  for (var a in articles) {
    Tag.append(Article(articles[a].title, articles[a].author, articles[a].published, articles[a].content), Tag.get('main')[0]);
  }
}); //GÉNÉRATION FOOTER

Tag.append(Footer(Logo('https://picsum.photos/80', 'Logo aléatoire'), NavList({
  "Accueil": "/accueil",
  "Articles": "/articles",
  "À propos de nous": "/apropos"
}), SocialList({
  "facebook": "www.facebook.fr",
  "Twitter": "www.twitter.com",
  "Instagram": "www.instagram.com"
})), Tag.get('footer')[0]);
Tag.append(Formulaire("http://188.165.104.163:8080/publish", "POST"), Tag.ROOT);

},{"./components/Article":1,"./components/CategoriesList":2,"./components/Counter":3,"./components/Footer":4,"./components/Formulaire":5,"./components/Header":6,"./components/Logo":7,"./components/NavList":8,"./components/SocialList":9,"./toolkit":11}],11:[function(require,module,exports){
"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

// EcmaScript 
// Dépendent du contexte d'exécution
// Tous les navigateurs n'ont pas la même version de JS
// deux modes d'accès aux propriétés d'un objet : 
// 	* objet   : obj.property 
// 	* tableau : obj["property"] 
// for...in 
// typeof 
// createElement, appendChild, setAttributes
// functions anonymes : function() { ... }
// ##########################
// # UI Toolkit
// ##########################
var Tag = {}; //Tag.ROOT = ROOT est un attribut de Tag

Tag.ROOT = document.body; //Tag.create = déclaration fonction anonyme qu'on désanonymise : elle devient une méthode de Tag
//function(param){instructions} <= fonction anonyme
//la fonction anonyme peut être mise dans une variable, tranformée en méthode d'objet...

Tag.create = function (type) {
  var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var children = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
  // Crée l'élément HTML 
  var tag = document.createElement(type); // Assigne des attributs

  for (var key in attributes) {
    tag.setAttribute(key, attributes[key]);
  } // Assigne des éléments HTML enfants


  for (var key in children) {
    var child;

    if (_typeof(children[key]) === "object") {
      child = children[key];
    } else {
      child = document.createElement("span");
      child.innerText = children[key].toString();
    }

    tag.appendChild(child);
  } // Retourne l'élément HTML


  return tag;
};

Tag.append = function (tag, parentNode) {
  parentNode.appendChild(tag);
};

Tag.get = function (selector) {
  var list = []; // selector = id ?

  var idElm = document.getElementById(selector);
  if (idElm !== null) list.push(idElm); // selector = class ?

  var classElm = document.getElementsByClassName(selector);

  for (var i = 0; i < classElm.length; i++) {
    list.push(classElm[i]);
  } // selector = tag ?


  var tagElm = document.getElementsByTagName(selector);

  for (var i = 0; i < tagElm.length; i++) {
    list.push(tagElm[i]);
  }

  return list;
};

module.exports = Tag;

},{}]},{},[10])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZW50cy9BcnRpY2xlLmpzIiwic3JjL2NvbXBvbmVudHMvQ2F0ZWdvcmllc0xpc3QuanMiLCJzcmMvY29tcG9uZW50cy9Db3VudGVyLmpzIiwic3JjL2NvbXBvbmVudHMvRm9vdGVyLmpzIiwic3JjL2NvbXBvbmVudHMvRm9ybXVsYWlyZS5qcyIsInNyYy9jb21wb25lbnRzL0hlYWRlci5qcyIsInNyYy9jb21wb25lbnRzL0xvZ28uanMiLCJzcmMvY29tcG9uZW50cy9OYXZMaXN0LmpzIiwic3JjL2NvbXBvbmVudHMvU29jaWFsTGlzdC5qcyIsInNyYy9zY3JpcHQuanMiLCJzcmMvdG9vbGtpdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFlBQUQsQ0FBbkI7O0FBRUEsU0FBUyxPQUFULENBQWlCLEtBQWpCLEVBQXdCLE1BQXhCLEVBQWdDLFNBQWhDLEVBQTJDLE9BQTNDLEVBQW9EO0FBRWxELE1BQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxNQUFKLENBQ1osS0FEWSxFQUVaO0FBQUUsYUFBUztBQUFYLEdBRlksRUFHWixDQUNFLEdBQUcsQ0FBQyxNQUFKLENBQVcsSUFBWCxFQUFpQjtBQUFFLGFBQVM7QUFBWCxHQUFqQixFQUErQyxDQUFDLEtBQUQsQ0FBL0MsQ0FERixFQUVFLEdBQUcsQ0FBQyxNQUFKLENBQVcsS0FBWCxFQUFrQjtBQUFFLGFBQVM7QUFBWCxHQUFsQixFQUFtRCxDQUN4RCxHQUFHLENBQUMsTUFBSixDQUFXLE1BQVgsRUFBbUI7QUFBQyxhQUFTO0FBQVYsR0FBbkIsRUFBaUQsQ0FBQyxNQUFELENBQWpELENBRHdELEVBRXhELEdBQUcsQ0FBQyxNQUFKLENBQVcsTUFBWCxFQUFtQjtBQUFDLGFBQVM7QUFBVixHQUFuQixFQUFvRCxDQUFDLFNBQUQsQ0FBcEQsQ0FGd0QsQ0FBbkQsQ0FGRixFQU1FLEdBQUcsQ0FBQyxNQUFKLENBQVcsR0FBWCxFQUFnQjtBQUFFLGFBQVM7QUFBWCxHQUFoQixFQUFnRCxDQUFDLE9BQUQsQ0FBaEQsQ0FORixDQUhZLENBQWQ7QUFhQSxTQUFPLE9BQVA7QUFDRDs7QUFFRCxNQUFNLENBQUMsT0FBUCxHQUFpQixPQUFqQjs7Ozs7QUNwQkEsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFlBQUQsQ0FBbkI7O0FBRUEsU0FBUyxjQUFULENBQXdCLFFBQXhCLEVBQWtDO0FBRWhDO0FBQ0EsTUFBSSxVQUFVLEdBQUcsSUFBSSxHQUFKLEVBQWpCOztBQUVBLE9BQUksSUFBSSxDQUFSLElBQWEsUUFBYixFQUF1QjtBQUNyQixJQUFBLFVBQVUsQ0FBQyxHQUFYLENBQWUsUUFBUSxDQUFDLENBQUQsQ0FBUixDQUFZLFFBQTNCO0FBQ0QsR0FQK0IsQ0FTaEM7OztBQUNBLE1BQUksUUFBUSxHQUFHLEVBQWY7QUFFQSxFQUFBLFVBQVUsQ0FBQyxPQUFYLENBQW1CLFVBQVMsR0FBVCxFQUFjO0FBQy9CLElBQUEsUUFBUSxDQUFDLElBQVQsQ0FBYyxHQUFHLENBQUMsTUFBSixDQUFXLElBQVgsRUFBaUIsRUFBakIsRUFBcUIsQ0FBQyxHQUFELENBQXJCLENBQWQ7QUFDRCxHQUZELEVBWmdDLENBZ0JoQzs7QUFDQSxNQUFJLGNBQWMsR0FBRyxHQUFHLENBQUMsTUFBSixDQUFXLEtBQVgsRUFBa0I7QUFBQyxhQUFTO0FBQVYsR0FBbEIsRUFBMkMsQ0FDOUQsR0FBRyxDQUFDLE1BQUosQ0FBVyxHQUFYLEVBQWdCLEVBQWhCLEVBQW9CLENBQUMsc0JBQUQsQ0FBcEIsQ0FEOEQsRUFFOUQsR0FBRyxDQUFDLE1BQUosQ0FBVyxJQUFYLEVBQWlCLEVBQWpCLEVBQXFCLFFBQXJCLENBRjhELENBQTNDLENBQXJCO0FBS0EsU0FBTyxjQUFQO0FBQ0Q7O0FBRUQsTUFBTSxDQUFDLE9BQVAsR0FBaUIsY0FBakI7Ozs7O0FDM0JBLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFELENBQW5COztBQUVBLFNBQVMsT0FBVCxDQUFpQixRQUFqQixFQUEyQjtBQUN6QixNQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsTUFBSixDQUFXLEtBQVgsRUFBa0I7QUFBQyxhQUFTO0FBQVYsR0FBbEIsRUFBd0MsQ0FDcEQsR0FBRyxDQUFDLE1BQUosQ0FBVyxNQUFYLEVBQW1CLEVBQW5CLEVBQXVCLENBQUMsc0JBQUQsQ0FBdkIsQ0FEb0QsRUFFcEQsR0FBRyxDQUFDLE1BQUosQ0FBVyxNQUFYLEVBQW1CLEVBQW5CLEVBQXVCLENBQUMsUUFBUSxDQUFDLE1BQVYsQ0FBdkIsQ0FGb0QsQ0FBeEMsQ0FBZDtBQUlBLFNBQU8sT0FBUDtBQUNEOztBQUVELE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE9BQWpCOzs7OztBQ1ZBLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFELENBQW5CLEMsQ0FFQTs7O0FBQ0EsU0FBUyxNQUFULENBQWdCLElBQWhCLEVBQXNCLElBQXRCLEVBQTRCLGFBQTVCLEVBQTBDO0FBQ3hDLE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFKLENBQ1gsUUFEVyxFQUVYO0FBQUMsYUFBUztBQUFWLEdBRlcsRUFHWCxDQUNFLEdBQUcsQ0FBQyxNQUFKLENBQVcsS0FBWCxFQUNFO0FBQUMsYUFBUztBQUFWLEdBREYsRUFFRSxDQUFDLElBQUQsQ0FGRixDQURGLEVBS0UsR0FBRyxDQUFDLE1BQUosQ0FBVyxLQUFYLEVBQ0U7QUFBQyxhQUFTO0FBQVYsR0FERixFQUVFLENBQUMsSUFBRCxDQUZGLENBTEYsRUFTRSxHQUFHLENBQUMsTUFBSixDQUFXLEtBQVgsRUFDRTtBQUFDLGFBQVM7QUFBVixHQURGLEVBRUUsQ0FBQyxhQUFELENBRkYsQ0FURixDQUhXLENBQWI7QUFnQkEsU0FBTyxNQUFQO0FBQ0Q7O0FBRUQsTUFBTSxDQUFDLE9BQVAsR0FBaUIsTUFBakI7Ozs7O0FDdkJBLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFELENBQW5COztBQUVBLFNBQVMsVUFBVCxDQUFvQixNQUFwQixFQUE0QixNQUE1QixFQUFvQztBQUVoQyxNQUFJLFVBQVUsR0FBRyxHQUFHLENBQUMsTUFBSixDQUNiLEtBRGEsRUFDTjtBQUFFLGFBQVM7QUFBWCxHQURNLEVBQ3FCLENBQzlCLEdBQUcsQ0FBQyxNQUFKLENBQVcsTUFBWCxFQUFtQjtBQUNmLGFBQVMsTUFETTtBQUVmLElBQUEsTUFBTSxFQUFOLE1BRmU7QUFHZixJQUFBLE1BQU0sRUFBTjtBQUhlLEdBQW5CLEVBSUcsQ0FDQyxHQUFHLENBQUMsTUFBSixDQUFXLE9BQVgsRUFBb0I7QUFDaEIsYUFBUyxZQURPO0FBRWhCLFlBQVEsTUFGUTtBQUdoQixZQUFRLE9BSFE7QUFJaEIsYUFBUztBQUpPLEdBQXBCLENBREQsRUFPQyxHQUFHLENBQUMsTUFBSixDQUFXLE9BQVgsRUFBb0I7QUFDaEIsYUFBUyxhQURPO0FBRWhCLFlBQVEsTUFGUTtBQUdoQixZQUFRLFFBSFE7QUFJaEIsYUFBUztBQUpPLEdBQXBCLENBUEQsRUFhQyxHQUFHLENBQUMsTUFBSixDQUFXLE9BQVgsRUFBb0I7QUFDaEIsYUFBUyxnQkFETztBQUVoQixZQUFRLE1BRlE7QUFHaEIsWUFBUSxXQUhRO0FBSWhCLGFBQVM7QUFKTyxHQUFwQixDQWJELEVBbUJDLEdBQUcsQ0FBQyxNQUFKLENBQVcsT0FBWCxFQUFvQjtBQUNoQixhQUFTLGVBRE87QUFFaEIsWUFBUSxNQUZRO0FBR2hCLFlBQVEsVUFIUTtBQUloQixhQUFTO0FBSk8sR0FBcEIsQ0FuQkQsRUF5QkMsR0FBRyxDQUFDLE1BQUosQ0FBVyxPQUFYLEVBQW9CO0FBQ2hCLGFBQVMsY0FETztBQUVoQixZQUFRLE1BRlE7QUFHaEIsWUFBUSxTQUhRO0FBSWhCLGFBQVM7QUFKTyxHQUFwQixDQXpCRCxFQStCQyxHQUFHLENBQUMsTUFBSixDQUFXLE9BQVgsRUFBb0I7QUFDaEIsYUFBUyxhQURPO0FBRWhCLFlBQVE7QUFGUSxHQUFwQixDQS9CRCxDQUpILENBRDhCLENBRHJCLENBQWpCO0FBNkNBLEVBQUEsTUFBTSxDQUFDLFlBQVAsR0FBc0IsTUFBdEI7QUFDQSxTQUFPLFVBQVA7QUFDSDs7QUFFRCxNQUFNLENBQUMsT0FBUCxHQUFpQixVQUFqQjs7Ozs7QUNyREEsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFlBQUQsQ0FBbkI7O0FBRUEsU0FBUyxNQUFULENBQWdCLElBQWhCLEVBQXNCLElBQXRCLEVBQTJCO0FBQ3pCLE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFKLENBQ1gsUUFEVyxFQUVYO0FBQUMsYUFBUztBQUFWLEdBRlcsRUFHWCxDQUNFLEdBQUcsQ0FBQyxNQUFKLENBQVcsS0FBWCxFQUNFO0FBQUMsYUFBUztBQUFWLEdBREYsRUFFRSxDQUFDLElBQUQsQ0FGRixDQURGLEVBS0UsR0FBRyxDQUFDLE1BQUosQ0FBVyxLQUFYLEVBQ0U7QUFBQyxhQUFTO0FBQVYsR0FERixFQUVFLENBQUMsSUFBRCxDQUZGLENBTEYsQ0FIVyxDQUFiO0FBYUEsU0FBTyxNQUFQO0FBQ0Q7O0FBRUQsTUFBTSxDQUFDLE9BQVAsR0FBaUIsTUFBakI7Ozs7O0FDbkJBLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFELENBQW5COztBQUVBLFNBQVMsSUFBVCxDQUFjLEdBQWQsRUFBbUIsR0FBbkIsRUFBdUI7QUFDckIsTUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQUosQ0FDVCxLQURTLEVBRVQ7QUFBQyxXQUFPLEdBQVI7QUFBYSxXQUFRO0FBQXJCLEdBRlMsRUFHVCxFQUhTLENBQVg7QUFLQSxTQUFPLElBQVA7QUFDRDs7QUFFRCxNQUFNLENBQUMsT0FBUCxHQUFpQixJQUFqQjs7Ozs7QUNYQSxJQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsWUFBRCxDQUFuQjs7QUFFQSxTQUFTLE9BQVQsQ0FBaUIsT0FBakIsRUFBMEI7QUFDeEI7QUFDQSxNQUFJLFFBQVEsR0FBRyxFQUFmOztBQUNBLE9BQUksSUFBSSxHQUFSLElBQWUsT0FBZixFQUF1QjtBQUNyQixJQUFBLFFBQVEsQ0FBQyxJQUFULENBQWMsR0FBRyxDQUFDLE1BQUosQ0FBVyxJQUFYLEVBQWlCLEVBQWpCLEVBQXFCLENBQ2pDLEdBQUcsQ0FBQyxNQUFKLENBQVksR0FBWixFQUFpQjtBQUFDLGNBQVEsT0FBTyxDQUFDLEdBQUQ7QUFBaEIsS0FBakIsRUFBeUMsQ0FBQyxHQUFELENBQXpDLENBRGlDLENBQXJCLENBQWQ7QUFHRDs7QUFBQSxHQVB1QixDQVN4Qjs7QUFDQSxNQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsTUFBSixDQUFXLEtBQVgsRUFBa0I7QUFBQyxhQUFTO0FBQVYsR0FBbEIsRUFBdUMsQ0FDbkQsR0FBRyxDQUFDLE1BQUosQ0FBVyxJQUFYLEVBQWlCLEVBQWpCLEVBQXFCLFFBQXJCLENBRG1ELENBQXZDLENBQWQ7QUFHQSxTQUFPLE9BQVA7QUFDRDs7QUFFRCxNQUFNLENBQUMsT0FBUCxHQUFpQixPQUFqQjs7Ozs7QUNsQkEsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFlBQUQsQ0FBbkI7O0FBRUEsU0FBUyxVQUFULENBQW9CLFVBQXBCLEVBQWdDO0FBQzlCO0FBQ0EsTUFBSSxVQUFVLEdBQUcsRUFBakI7O0FBQ0EsT0FBSSxJQUFJLEdBQVIsSUFBZSxVQUFmLEVBQTBCO0FBQ3hCLElBQUEsVUFBVSxDQUFDLElBQVgsQ0FBZ0IsR0FBRyxDQUFDLE1BQUosQ0FBVyxJQUFYLEVBQWlCLEVBQWpCLEVBQXFCLENBQ25DLEdBQUcsQ0FBQyxNQUFKLENBQVksR0FBWixFQUFpQjtBQUFDLGNBQVEsVUFBVSxDQUFDLEdBQUQ7QUFBbkIsS0FBakIsRUFBNEMsQ0FBQyxHQUFELENBQTVDLENBRG1DLENBQXJCLENBQWhCO0FBR0Q7O0FBQUEsR0FQNkIsQ0FTOUI7O0FBQ0EsTUFBSSxVQUFVLEdBQUcsR0FBRyxDQUFDLE1BQUosQ0FBVyxLQUFYLEVBQWtCO0FBQUMsYUFBUztBQUFWLEdBQWxCLEVBQTBDLENBQ3pELEdBQUcsQ0FBQyxNQUFKLENBQVcsSUFBWCxFQUFpQixFQUFqQixFQUFxQixVQUFyQixDQUR5RCxDQUExQyxDQUFqQjtBQUdBLFNBQU8sVUFBUDtBQUNEOztBQUVELE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFVBQWpCOzs7OztBQ2xCQSxJQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsV0FBRCxDQUFuQjs7QUFDQSxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsc0JBQUQsQ0FBdkI7O0FBQ0EsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLHFCQUFELENBQXRCOztBQUNBLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxxQkFBRCxDQUF0Qjs7QUFDQSxJQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMseUJBQUQsQ0FBMUI7O0FBQ0EsSUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLDZCQUFELENBQTlCOztBQUNBLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxzQkFBRCxDQUF2Qjs7QUFDQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBcEI7O0FBQ0EsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLHNCQUFELENBQXZCOztBQUNBLElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyx5QkFBRCxDQUExQixDLENBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUNBLEdBQUcsQ0FBQyxNQUFKLENBQ0ksTUFBTSxDQUNGLElBQUksQ0FBQywwQkFBRCxFQUE2QixnQkFBN0IsQ0FERixFQUVGLE9BQU8sQ0FBQztBQUFFLGFBQVcsVUFBYjtBQUF5QixjQUFZLFdBQXJDO0FBQWtELHNCQUFvQjtBQUF0RSxDQUFELENBRkwsQ0FEVixFQUtJLEdBQUcsQ0FBQyxHQUFKLENBQVEsUUFBUixFQUFrQixDQUFsQixDQUxKLEUsQ0FRQTs7QUFDQSxLQUFLLENBQUMsSUFBSSxPQUFKLENBQVksc0NBQVosQ0FBRCxDQUFMLENBQ0ssSUFETCxDQUNVLFVBQVMsR0FBVCxFQUFjO0FBQUUsU0FBTyxHQUFHLENBQUMsSUFBSixFQUFQO0FBQW1CLENBRDdDLEVBRUssSUFGTCxDQUVVLFVBQVMsUUFBVCxFQUFtQjtBQUNyQixFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVcsY0FBYyxDQUFDLFFBQUQsQ0FBekIsRUFBcUMsR0FBRyxDQUFDLEdBQUosQ0FBUSxNQUFSLEVBQWdCLENBQWhCLENBQXJDO0FBQ0EsRUFBQSxHQUFHLENBQUMsTUFBSixDQUFXLE9BQU8sQ0FBQyxRQUFELENBQWxCLEVBQThCLEdBQUcsQ0FBQyxHQUFKLENBQVEsTUFBUixFQUFnQixDQUFoQixDQUE5Qjs7QUFFQSxPQUFLLElBQUksQ0FBVCxJQUFjLFFBQWQsRUFBd0I7QUFDcEIsSUFBQSxHQUFHLENBQUMsTUFBSixDQUNJLE9BQU8sQ0FDSCxRQUFRLENBQUMsQ0FBRCxDQUFSLENBQVksS0FEVCxFQUVILFFBQVEsQ0FBQyxDQUFELENBQVIsQ0FBWSxNQUZULEVBR0gsUUFBUSxDQUFDLENBQUQsQ0FBUixDQUFZLFNBSFQsRUFJSCxRQUFRLENBQUMsQ0FBRCxDQUFSLENBQVksT0FKVCxDQURYLEVBT0ksR0FBRyxDQUFDLEdBQUosQ0FBUSxNQUFSLEVBQWdCLENBQWhCLENBUEo7QUFTSDtBQUNKLENBakJMLEUsQ0FtQkE7O0FBQ0EsR0FBRyxDQUFDLE1BQUosQ0FBVyxNQUFNLENBQ1QsSUFBSSxDQUFDLDBCQUFELEVBQTZCLGdCQUE3QixDQURLLEVBRVQsT0FBTyxDQUFDO0FBQUUsYUFBVyxVQUFiO0FBQXlCLGNBQVksV0FBckM7QUFBa0Qsc0JBQW9CO0FBQXRFLENBQUQsQ0FGRSxFQUdULFVBQVUsQ0FBQztBQUFFLGNBQVksaUJBQWQ7QUFBaUMsYUFBVyxpQkFBNUM7QUFBK0QsZUFBYTtBQUE1RSxDQUFELENBSEQsQ0FBakIsRUFJSSxHQUFHLENBQUMsR0FBSixDQUFRLFFBQVIsRUFBa0IsQ0FBbEIsQ0FKSjtBQU1BLEdBQUcsQ0FBQyxNQUFKLENBQVcsVUFBVSxDQUFDLHFDQUFELEVBQXdDLE1BQXhDLENBQXJCLEVBQXNFLEdBQUcsQ0FBQyxJQUExRTs7Ozs7OztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBLElBQUksR0FBRyxHQUFHLEVBQVYsQyxDQUVFOztBQUNGLEdBQUcsQ0FBQyxJQUFKLEdBQVcsUUFBUSxDQUFDLElBQXBCLEMsQ0FHRTtBQUNBO0FBQ0E7O0FBQ0YsR0FBRyxDQUFDLE1BQUosR0FBYSxVQUFVLElBQVYsRUFDYjtBQUFBLE1BRDZCLFVBQzdCLHVFQUQwQyxFQUMxQztBQUFBLE1BRDhDLFFBQzlDLHVFQUR5RCxFQUN6RDtBQUNFO0FBQ0EsTUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsSUFBdkIsQ0FBVixDQUZGLENBSUU7O0FBQ0EsT0FBSSxJQUFJLEdBQVIsSUFBZSxVQUFmLEVBQTJCO0FBQ3pCLElBQUEsR0FBRyxDQUFDLFlBQUosQ0FBaUIsR0FBakIsRUFBc0IsVUFBVSxDQUFDLEdBQUQsQ0FBaEM7QUFDRCxHQVBILENBU0U7OztBQUNBLE9BQUksSUFBSSxHQUFSLElBQWUsUUFBZixFQUF5QjtBQUV2QixRQUFJLEtBQUo7O0FBRUEsUUFBRyxRQUFPLFFBQVEsQ0FBQyxHQUFELENBQWYsTUFBeUIsUUFBNUIsRUFBc0M7QUFDcEMsTUFBQSxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUQsQ0FBaEI7QUFDRCxLQUZELE1BR0s7QUFDSCxNQUFBLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixDQUFSO0FBQ0EsTUFBQSxLQUFLLENBQUMsU0FBTixHQUFrQixRQUFRLENBQUMsR0FBRCxDQUFSLENBQWMsUUFBZCxFQUFsQjtBQUNEOztBQUVELElBQUEsR0FBRyxDQUFDLFdBQUosQ0FBZ0IsS0FBaEI7QUFFRCxHQXhCSCxDQTBCRTs7O0FBQ0EsU0FBTyxHQUFQO0FBQ0QsQ0E3QkQ7O0FBK0JBLEdBQUcsQ0FBQyxNQUFKLEdBQWEsVUFBVSxHQUFWLEVBQWUsVUFBZixFQUEyQjtBQUN0QyxFQUFBLFVBQVUsQ0FBQyxXQUFYLENBQXVCLEdBQXZCO0FBQ0QsQ0FGRDs7QUFJQSxHQUFHLENBQUMsR0FBSixHQUFVLFVBQVMsUUFBVCxFQUFtQjtBQUMzQixNQUFJLElBQUksR0FBRyxFQUFYLENBRDJCLENBRzNCOztBQUNBLE1BQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLFFBQXhCLENBQVo7QUFDQSxNQUFHLEtBQUssS0FBSyxJQUFiLEVBQ0UsSUFBSSxDQUFDLElBQUwsQ0FBVSxLQUFWLEVBTnlCLENBUTNCOztBQUNBLE1BQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxzQkFBVCxDQUFnQyxRQUFoQyxDQUFmOztBQUNBLE9BQUksSUFBSSxDQUFDLEdBQUcsQ0FBWixFQUFlLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBNUIsRUFBb0MsQ0FBQyxFQUFyQyxFQUF5QztBQUN2QyxJQUFBLElBQUksQ0FBQyxJQUFMLENBQVUsUUFBUSxDQUFDLENBQUQsQ0FBbEI7QUFDRCxHQVowQixDQWMzQjs7O0FBQ0EsTUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLG9CQUFULENBQThCLFFBQTlCLENBQWI7O0FBQ0EsT0FBSSxJQUFJLENBQUMsR0FBRyxDQUFaLEVBQWUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUExQixFQUFrQyxDQUFDLEVBQW5DLEVBQXVDO0FBQ3JDLElBQUEsSUFBSSxDQUFDLElBQUwsQ0FBVSxNQUFNLENBQUMsQ0FBRCxDQUFoQjtBQUNEOztBQUVELFNBQU8sSUFBUDtBQUNELENBckJEOztBQXVCQSxNQUFNLENBQUMsT0FBUCxHQUFpQixHQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IFRhZyA9IHJlcXVpcmUoJy4uL3Rvb2xraXQnKTtcblxuZnVuY3Rpb24gQXJ0aWNsZSh0aXRsZSwgYXV0aG9yLCBwdWJsaXNoZWQsIGNvbnRlbnQpIHtcblxuICB2YXIgYXJ0aWNsZSA9IFRhZy5jcmVhdGUoXG4gICAgXCJkaXZcIiwgXG4gICAgeyBcImNsYXNzXCI6IFwiQXJ0aWNsZVwiIH0sXG4gICAgW1xuICAgICAgVGFnLmNyZWF0ZShcImgxXCIsIHsgXCJjbGFzc1wiOiBcIkFydGljbGVfX1RpdGxlXCJ9LCBbdGl0bGVdKSxcbiAgICAgIFRhZy5jcmVhdGUoXCJkaXZcIiwgeyBcImNsYXNzXCI6IFwiQXJ0aWNsZV9fTWV0YWRhdGFcIn0sIFtcblx0VGFnLmNyZWF0ZShcInNwYW5cIiwge1wiY2xhc3NcIjogXCJBcnRpY2xlX19BdXRob3JcIn0sIFthdXRob3JdKSxcblx0VGFnLmNyZWF0ZShcInNwYW5cIiwge1wiY2xhc3NcIjogXCJBcnRpY2xlX19QdWJsaXNoZWRcIn0sIFtwdWJsaXNoZWRdKVxuICAgICAgXSksXG4gICAgICBUYWcuY3JlYXRlKFwicFwiLCB7IFwiY2xhc3NcIjogXCJBcnRpY2xlX19Db250ZW50XCJ9LCBbY29udGVudF0pLFxuICAgIF1cbiAgKTtcblxuICByZXR1cm4gYXJ0aWNsZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcnRpY2xlO1xuIiwiY29uc3QgVGFnID0gcmVxdWlyZSgnLi4vdG9vbGtpdCcpO1xuXG5mdW5jdGlvbiBDYXRlZ29yaWVzTGlzdChhcnRpY2xlcykge1xuXG4gIC8vIFLDqWN1cMOpcmVyIGxlcyBkb25uw6llcyBwZXJ0aW5hbnRlc1xuICBsZXQgY2F0ZWdvcmllcyA9IG5ldyBTZXQoKTtcblxuICBmb3IodmFyIGEgaW4gYXJ0aWNsZXMpIHtcbiAgICBjYXRlZ29yaWVzLmFkZChhcnRpY2xlc1thXS5jYXRlZ29yeSk7XG4gIH1cblxuICAvLyBHw6luZXJlciBsZSB0YWJsZWF1IGRlIExJXG4gIHZhciBpdGVtTGlzdCA9IFtdO1xuXG4gIGNhdGVnb3JpZXMuZm9yRWFjaChmdW5jdGlvbihlbG0pIHtcbiAgICBpdGVtTGlzdC5wdXNoKFRhZy5jcmVhdGUoXCJsaVwiLCB7fSwgW2VsbV0pKTtcbiAgfSk7XG4gIFxuICAvLyBDcsOpZXIgbGUgY29tcG9zYW50IEhUTUxcbiAgdmFyIGNhdGVnb3JpZXNMaXN0ID0gVGFnLmNyZWF0ZShcImRpdlwiLCB7XCJjbGFzc1wiOiBcIkNhdGVnb3JpZXNcIn0sIFtcbiAgICBUYWcuY3JlYXRlKFwicFwiLCB7fSwgW1wiTGlzdGUgZGVzIGNhdMOpZ29yaWVzXCJdKSxcbiAgICBUYWcuY3JlYXRlKFwidWxcIiwge30sIGl0ZW1MaXN0KVxuICBdKTtcblxuICByZXR1cm4gY2F0ZWdvcmllc0xpc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2F0ZWdvcmllc0xpc3Q7XG4iLCJjb25zdCBUYWcgPSByZXF1aXJlKCcuLi90b29sa2l0Jyk7XG5cbmZ1bmN0aW9uIENvdW50ZXIoYXJ0aWNsZXMpIHtcbiAgdmFyIGNvdW50ZXIgPSBUYWcuY3JlYXRlKFwiZGl2XCIsIHtcImNsYXNzXCI6IFwiQ291bnRlclwifSwgW1xuICAgIFRhZy5jcmVhdGUoXCJzcGFuXCIsIHt9LCBbXCJOb21icmUgZCdhcnRpY2xlcyA6IFwiXSksXG4gICAgVGFnLmNyZWF0ZShcInNwYW5cIiwge30sIFthcnRpY2xlcy5sZW5ndGhdKVxuICBdKVxuICByZXR1cm4gY291bnRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb3VudGVyO1xuIiwiY29uc3QgVGFnID0gcmVxdWlyZSgnLi4vdG9vbGtpdCcpO1xuXG4vL0NvbXBvbmVudCBmb290ZXJcbmZ1bmN0aW9uIEZvb3Rlcihsb2dvLCBtZW51LCBzb2NpYWxOZXR3b3JrKXtcbiAgbGV0IGZvb3RlciA9IFRhZy5jcmVhdGUoXG4gICAgXCJmb290ZXJcIixcbiAgICB7XCJjbGFzc1wiOiBcImZvb3RlclwifSxcbiAgICBbXG4gICAgICBUYWcuY3JlYXRlKFwiZGl2XCIsXG4gICAgICAgIHtcImNsYXNzXCI6IFwibG9nb1wifSxcbiAgICAgICAgW2xvZ29dXG4gICAgICApLFxuICAgICAgVGFnLmNyZWF0ZShcImRpdlwiLFxuICAgICAgICB7XCJjbGFzc1wiOiBcIm1lbnVcIn0sXG4gICAgICAgIFttZW51XVxuICAgICAgKSxcbiAgICAgIFRhZy5jcmVhdGUoXCJkaXZcIixcbiAgICAgICAge1wiY2xhc3NcIjogXCJzb2NpYWxOZXR3b3JrXCJ9LFxuICAgICAgICBbc29jaWFsTmV0d29ya11cbiAgICAgICldKVxuICByZXR1cm4gZm9vdGVyXG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9vdGVyO1xuIiwiY29uc3QgVGFnID0gcmVxdWlyZSgnLi4vdG9vbGtpdCcpO1xuXG5mdW5jdGlvbiBGb3JtdWxhaXJlKGFjdGlvbiwgbWV0aG9kKSB7XG5cbiAgICBsZXQgZm9ybXVsYWlyZSA9IFRhZy5jcmVhdGUoXG4gICAgICAgIFwiZGl2XCIsIHsgXCJjbGFzc1wiOiBcIkZvcm11bGFpcmVcIiB9LCBbXG4gICAgICAgICAgICBUYWcuY3JlYXRlKFwiZm9ybVwiLCB7XG4gICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcIkZvcm1cIixcbiAgICAgICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICAgICAgbWV0aG9kXG4gICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgVGFnLmNyZWF0ZShcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcIkZvcm1fVGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ0aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwidGl0bGVcIlxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIFRhZy5jcmVhdGUoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJGb3JtX0F1dGhvclwiLFxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImF1dGhvclwiLFxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiYXV0aG9yXCJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBUYWcuY3JlYXRlKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwiRm9ybV9QdWJsaXNoZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJwdWJsaXNoZWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcIjIwLzAyLzIwMjFcIlxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIFRhZy5jcmVhdGUoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJGb3JtX0NhdGVnb3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY2F0ZWdvcnlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcImNhdGVnb3J5XCJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBUYWcuY3JlYXRlKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwiRm9ybV9Db250ZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY29udGVudFwiLFxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiY29udGVudFwiXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgVGFnLmNyZWF0ZShcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcIkZvcm1fU3VibWl0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pLFxuXG4gICAgICAgIF1cbiAgICApO1xuICAgIGFjdGlvbi5yZXNwb25zZVR5cGUgPSAnanNvbidcbiAgICByZXR1cm4gZm9ybXVsYWlyZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGb3JtdWxhaXJlO1xuIiwiY29uc3QgVGFnID0gcmVxdWlyZSgnLi4vdG9vbGtpdCcpO1xuXG5mdW5jdGlvbiBIZWFkZXIobG9nbywgbWVudSl7XG4gIGxldCBoZWFkZXIgPSBUYWcuY3JlYXRlKFxuICAgIFwiaGVhZGVyXCIsXG4gICAge1wiY2xhc3NcIjogXCJoZWFkZXJcIn0sXG4gICAgW1xuICAgICAgVGFnLmNyZWF0ZShcImRpdlwiLFxuICAgICAgICB7XCJjbGFzc1wiOiBcImxvZ29cIn0sXG4gICAgICAgIFtsb2dvXVxuICAgICAgKSxcbiAgICAgIFRhZy5jcmVhdGUoXCJkaXZcIixcbiAgICAgICAge1wiY2xhc3NcIjogXCJtZW51XCJ9LFxuICAgICAgICBbbWVudV1cbiAgICAgIClcbiAgICBdKVxuICByZXR1cm4gaGVhZGVyXG59XG5cbm1vZHVsZS5leHBvcnRzID0gSGVhZGVyO1xuIiwiY29uc3QgVGFnID0gcmVxdWlyZSgnLi4vdG9vbGtpdCcpO1xuXG5mdW5jdGlvbiBMb2dvKHVybCwgYWx0KXtcbiAgbGV0IGxvZ28gPSBUYWcuY3JlYXRlKFxuICAgIFwiaW1nXCIsXG4gICAge1wic3JjXCI6IHVybCwgXCJhbHRcIiA6IGFsdH0sXG4gICAgW11cbiAgKVxuICByZXR1cm4gbG9nb1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExvZ287XG4iLCJjb25zdCBUYWcgPSByZXF1aXJlKCcuLi90b29sa2l0Jyk7XG5cbmZ1bmN0aW9uIE5hdkxpc3QoZGF0YU5hdikge1xuICAvLyBHw6luZXJlciBsZSB0YWJsZWF1IGRlIExJXG4gIHZhciBtZW51TGlzdCA9IFtdO1xuICBmb3IodmFyIGVsbSBpbiBkYXRhTmF2KXtcbiAgICBtZW51TGlzdC5wdXNoKFRhZy5jcmVhdGUoXCJsaVwiLCB7fSwgW1xuICAgICAgVGFnLmNyZWF0ZSAoXCJhXCIsIHsnaHJlZic6IGRhdGFOYXZbZWxtXX0sIFtlbG1dKVxuICAgIF0pKTtcbiAgfTtcblxuICAvLyBDcsOpZXIgbGUgY29tcG9zYW50IEhUTUxcbiAgdmFyIG5hdkxpc3QgPSBUYWcuY3JlYXRlKFwibmF2XCIsIHtcImNsYXNzXCI6IFwiTmF2QmFyXCJ9LCBbXG4gICAgVGFnLmNyZWF0ZShcInVsXCIsIHt9LCBtZW51TGlzdClcbiAgXSk7XG4gIHJldHVybiBuYXZMaXN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE5hdkxpc3Q7XG4iLCJjb25zdCBUYWcgPSByZXF1aXJlKCcuLi90b29sa2l0Jyk7XG5cbmZ1bmN0aW9uIFNvY2lhbExpc3QoZGF0YVNvY2lhbCkge1xuICAvLyBHw6luZXJlciBsZSB0YWJsZWF1IGRlIExJXG4gIHZhciBzb2NpYWxMaXN0ID0gW107XG4gIGZvcih2YXIgZWxtIGluIGRhdGFTb2NpYWwpe1xuICAgIHNvY2lhbExpc3QucHVzaChUYWcuY3JlYXRlKFwibGlcIiwge30sIFtcbiAgICAgIFRhZy5jcmVhdGUgKFwiYVwiLCB7J2hyZWYnOiBkYXRhU29jaWFsW2VsbV19LCBbZWxtXSlcbiAgICBdKSk7XG4gIH07XG5cbiAgLy8gQ3LDqWVyIGxlIGNvbXBvc2FudCBIVE1MXG4gIHZhciBsaXN0U29jaWFsID0gVGFnLmNyZWF0ZShcIm5hdlwiLCB7XCJjbGFzc1wiOiBcIlNvY2lhbEJhclwifSwgW1xuICAgIFRhZy5jcmVhdGUoXCJ1bFwiLCB7fSwgc29jaWFsTGlzdClcbiAgXSk7XG4gIHJldHVybiBsaXN0U29jaWFsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNvY2lhbExpc3Q7XG4iLCJjb25zdCBUYWcgPSByZXF1aXJlKCcuL3Rvb2xraXQnKVxuY29uc3QgQXJ0aWNsZSA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9BcnRpY2xlJylcbmNvbnN0IEhlYWRlciA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9IZWFkZXInKVxuY29uc3QgRm9vdGVyID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL0Zvb3RlcicpXG5jb25zdCBGb3JtdWxhaXJlID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL0Zvcm11bGFpcmUnKVxuY29uc3QgQ2F0ZWdvcmllc0xpc3QgPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvQ2F0ZWdvcmllc0xpc3QnKVxuY29uc3QgQ291bnRlciA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9Db3VudGVyJylcbmNvbnN0IExvZ28gPSByZXF1aXJlKCcuL2NvbXBvbmVudHMvTG9nbycpXG5jb25zdCBOYXZMaXN0ID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL05hdkxpc3QnKVxuY29uc3QgU29jaWFsTGlzdCA9IHJlcXVpcmUoJy4vY29tcG9uZW50cy9Tb2NpYWxMaXN0JylcblxuLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbi8vICMgQ29kZSBkZSBsJ2FwcGxpY2F0aW9uXG4vLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG4vL0fDiU7DiVJBVElPTiBIRUFERVJcblRhZy5hcHBlbmQoXG4gICAgSGVhZGVyKFxuICAgICAgICBMb2dvKCdodHRwczovL3BpY3N1bS5waG90b3MvODAnLCAnTG9nbyBhbMOpYXRvaXJlJyksXG4gICAgICAgIE5hdkxpc3QoeyBcIkFjY3VlaWxcIjogXCIvYWNjdWVpbFwiLCBcIkFydGljbGVzXCI6IFwiL2FydGljbGVzXCIsIFwiw4AgcHJvcG9zIGRlIG5vdXNcIjogXCIvYXByb3Bvc1wiIH0pXG4gICAgKSxcbiAgICBUYWcuZ2V0KCdoZWFkZXInKVswXVxuKVxuXG4vL0fDiU7DiVJBVElPTiBBUlRJQ0xFU1xuZmV0Y2gobmV3IFJlcXVlc3QoXCJodHRwOi8vMTg4LjE2NS4xMDQuMTYzOjgwODAvYXJ0aWNsZXNcIikpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7IHJldHVybiByZXMuanNvbigpIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24oYXJ0aWNsZXMpIHtcbiAgICAgICAgVGFnLmFwcGVuZChDYXRlZ29yaWVzTGlzdChhcnRpY2xlcyksIFRhZy5nZXQoJ21haW4nKVswXSk7XG4gICAgICAgIFRhZy5hcHBlbmQoQ291bnRlcihhcnRpY2xlcyksIFRhZy5nZXQoJ21haW4nKVswXSk7XG5cbiAgICAgICAgZm9yICh2YXIgYSBpbiBhcnRpY2xlcykge1xuICAgICAgICAgICAgVGFnLmFwcGVuZChcbiAgICAgICAgICAgICAgICBBcnRpY2xlKFxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlc1thXS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZXNbYV0uYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlc1thXS5wdWJsaXNoZWQsXG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVzW2FdLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBUYWcuZ2V0KCdtYWluJylbMF1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KVxuXG4vL0fDiU7DiVJBVElPTiBGT09URVJcblRhZy5hcHBlbmQoRm9vdGVyKFxuICAgICAgICBMb2dvKCdodHRwczovL3BpY3N1bS5waG90b3MvODAnLCAnTG9nbyBhbMOpYXRvaXJlJyksXG4gICAgICAgIE5hdkxpc3QoeyBcIkFjY3VlaWxcIjogXCIvYWNjdWVpbFwiLCBcIkFydGljbGVzXCI6IFwiL2FydGljbGVzXCIsIFwiw4AgcHJvcG9zIGRlIG5vdXNcIjogXCIvYXByb3Bvc1wiIH0pLFxuICAgICAgICBTb2NpYWxMaXN0KHsgXCJmYWNlYm9va1wiOiBcInd3dy5mYWNlYm9vay5mclwiLCBcIlR3aXR0ZXJcIjogXCJ3d3cudHdpdHRlci5jb21cIiwgXCJJbnN0YWdyYW1cIjogXCJ3d3cuaW5zdGFncmFtLmNvbVwiIH0pKSxcbiAgICBUYWcuZ2V0KCdmb290ZXInKVswXSk7XG5cblRhZy5hcHBlbmQoRm9ybXVsYWlyZShcImh0dHA6Ly8xODguMTY1LjEwNC4xNjM6ODA4MC9wdWJsaXNoXCIsIFwiUE9TVFwiKSwgVGFnLlJPT1QpXG4iLCIvLyBFY21hU2NyaXB0IFxuLy8gRMOpcGVuZGVudCBkdSBjb250ZXh0ZSBkJ2V4w6ljdXRpb25cbi8vIFRvdXMgbGVzIG5hdmlnYXRldXJzIG4nb250IHBhcyBsYSBtw6ptZSB2ZXJzaW9uIGRlIEpTXG4vLyBkZXV4IG1vZGVzIGQnYWNjw6hzIGF1eCBwcm9wcmnDqXTDqXMgZCd1biBvYmpldCA6IFxuLy8gXHQqIG9iamV0ICAgOiBvYmoucHJvcGVydHkgXG4vLyBcdCogdGFibGVhdSA6IG9ialtcInByb3BlcnR5XCJdIFxuLy8gZm9yLi4uaW4gXG4vLyB0eXBlb2YgXG4vLyBjcmVhdGVFbGVtZW50LCBhcHBlbmRDaGlsZCwgc2V0QXR0cmlidXRlc1xuLy8gZnVuY3Rpb25zIGFub255bWVzIDogZnVuY3Rpb24oKSB7IC4uLiB9XG5cbi8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4vLyAjIFVJIFRvb2xraXRcbi8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbnZhciBUYWcgPSB7fTtcblxuICAvL1RhZy5ST09UID0gUk9PVCBlc3QgdW4gYXR0cmlidXQgZGUgVGFnXG5UYWcuUk9PVCA9IGRvY3VtZW50LmJvZHk7XG5cblxuICAvL1RhZy5jcmVhdGUgPSBkw6ljbGFyYXRpb24gZm9uY3Rpb24gYW5vbnltZSBxdSdvbiBkw6lzYW5vbnltaXNlIDogZWxsZSBkZXZpZW50IHVuZSBtw6l0aG9kZSBkZSBUYWdcbiAgLy9mdW5jdGlvbihwYXJhbSl7aW5zdHJ1Y3Rpb25zfSA8PSBmb25jdGlvbiBhbm9ueW1lXG4gIC8vbGEgZm9uY3Rpb24gYW5vbnltZSBwZXV0IMOqdHJlIG1pc2UgZGFucyB1bmUgdmFyaWFibGUsIHRyYW5mb3Jtw6llIGVuIG3DqXRob2RlIGQnb2JqZXQuLi5cblRhZy5jcmVhdGUgPSBmdW5jdGlvbiAodHlwZSwgYXR0cmlidXRlcyA9IHt9LCBjaGlsZHJlbiA9IFtdKSBcbntcbiAgLy8gQ3LDqWUgbCfDqWzDqW1lbnQgSFRNTCBcbiAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG5cbiAgLy8gQXNzaWduZSBkZXMgYXR0cmlidXRzXG4gIGZvcih2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICB0YWcuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfVxuXG4gIC8vIEFzc2lnbmUgZGVzIMOpbMOpbWVudHMgSFRNTCBlbmZhbnRzXG4gIGZvcih2YXIga2V5IGluIGNoaWxkcmVuKSB7XG5cbiAgICB2YXIgY2hpbGQ7XG5cbiAgICBpZih0eXBlb2YgY2hpbGRyZW5ba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgY2hpbGQgPSBjaGlsZHJlbltrZXldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBjaGlsZC5pbm5lclRleHQgPSBjaGlsZHJlbltrZXldLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgdGFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblxuICB9XG5cbiAgLy8gUmV0b3VybmUgbCfDqWzDqW1lbnQgSFRNTFxuICByZXR1cm4gdGFnO1xufVxuXG5UYWcuYXBwZW5kID0gZnVuY3Rpb24gKHRhZywgcGFyZW50Tm9kZSkge1xuICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKHRhZyk7XG59XG5cblRhZy5nZXQgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHNlbGVjdG9yID0gaWQgP1xuICB2YXIgaWRFbG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7XG4gIGlmKGlkRWxtICE9PSBudWxsKVxuICAgIGxpc3QucHVzaChpZEVsbSk7XG5cbiAgLy8gc2VsZWN0b3IgPSBjbGFzcyA/XG4gIHZhciBjbGFzc0VsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoc2VsZWN0b3IpO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3NFbG0ubGVuZ3RoOyBpKyspIHtcbiAgICBsaXN0LnB1c2goY2xhc3NFbG1baV0pO1xuICB9XG5cbiAgLy8gc2VsZWN0b3IgPSB0YWcgP1xuICB2YXIgdGFnRWxtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgdGFnRWxtLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlzdC5wdXNoKHRhZ0VsbVtpXSk7XG4gIH1cblxuICByZXR1cm4gbGlzdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUYWc7XG4iXX0=
